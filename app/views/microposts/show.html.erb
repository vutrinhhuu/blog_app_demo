<% provide :title, @micropost.title %>
<div class="container">

  <div class="row">

    <!-- Post Content Column -->
    <div class="col-lg-8">

      <!-- Title -->
      <h1 class="mt-4"><%= @micropost.title %></h1>

      <!-- Author -->
      <p class="lead">
        by
        <a href="#"><%= link_to @user.name, @micropost.user %></a>
      </p>

      <hr>

      <!-- Date/Time -->
      <p>Posted <%= time_ago_in_words(@micropost.created_at) %> ago</p>

      <hr>

      <!-- Preview Image -->
      <div class= "text-center">
        <%= image_tag @micropost.picture.url if @micropost.picture? %>
      </div>

      <hr>

      <!-- Post Content -->

      <p><%= @micropost.content %></p>

      <blockquote class="blockquote">
        <footer class="blockquote-footer">Post by
          <cite title="Source Title"><%= @user.name %></cite>
        </footer>
      </blockquote>

      <hr>
      <% if logged_in? && current_user.current_user?(@micropost.user) %>
        <h3>Comments (<%= @micropost.comments.count %>)</h3>
      <% else %>
        <h3>Comments (<%= @micropost.comments.count %>)</h3>
        <div class="alert alert-primary" role="alert">
          If you want to post some comments, please <%= link_to "log in", login_path %>
        </div>
      <% end %>

      <!-- Comments Form -->
      <% if logged_in? && current_user.current_user?(@micropost.user) %>
        <%= form_for @comment do |f| %>
          <%= render "shared/error_messages", object: f.object %>
          <div class="card my-4">
            <h5 class="card-header">Leave a Comment:</h5>
            <div class="card-body">
              <form>
                <div class="form-group">
                  <%= f.hidden_field :micropost_id, value: @micropost.id %>
                  <%= f.text_area :content, placeholder: "Comment something..." %>
                </div>
                <%= f.submit t("post"), class: "btn btn-primary" %>
              </form>
            </div>
          </div>
        <% end %>
      <% end %>

      <div class="media mb-4">
        <% if @micropost.comments.any? %>
          <ol class="comment">
            <%= render @comments %>
          </ol>
        <% end %>
      </div>

      <div class="media mb-4">
        <%= paginate @comments, theme: "twitter-bootstrap-4" %>
      </div>

      <!-- Comment with nested comments -->

    </div>

        <!-- Sidebar Widgets Column -->
        <div class="col-md-4">

          <!-- Search Widget -->
          <div class="card my-4">
            <h5 class="card-header">Author</h5>
            <div class="card-body">
            <center>
              <section class="user_info">
                <h1>
                  <%= gravatar_for @user %>
                  <%= @user.name %>
                </h1>
              </section>
              <section class="stats">
                <%= render "shared/stats" %>
              </section>
            </center>
            <aside>
              <section>
                <%= render "users/follow_form" if logged_in? %>
              </section>
            </aside>
          </div>
          </div>

        </div>

      </div>
      <!-- /.row -->

    </div>
    <!-- /.container -->

<!-- show comment -->

